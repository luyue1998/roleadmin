{"ast":null,"code":"import \"antd/lib/transfer/style/css\";\nimport _Transfer from \"antd/lib/transfer\";\nimport \"antd/lib/input/style/css\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/button/style/css\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/card/style/css\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/modal/style/css\";\nimport _Modal from \"antd/lib/modal\";\nimport _objectSpread from \"D:\\\\react-admin-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport \"antd/lib/tree/style/css\";\nimport _Tree from \"antd/lib/tree\";\nimport \"antd/lib/form/style/css\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/select/style/css\";\nimport _Select from \"antd/lib/select\";\nvar _jsxFileName = \"D:\\\\react-admin-master\\\\src\\\\pages\\\\User\\\\Permission\\\\MenuManage\\\\index.js\";\nimport React from \"react\";\nimport BaseForm from '../../../../common/BaseForm';\nimport Etable from \"../../../../common/Etable\";\nimport { formateDate, updateSelectedItem, getList } from '../../../../utils';\nimport request from '../../../../utils/request';\nimport menuConfig from '../../../../config/menuConfig';\nconst Option = _Select.Option;\nconst FormItem = _Form.Item;\nconst TreeNode = _Tree.TreeNode;\nexport default class Permission extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.params = {\n      page: 1,\n      pageSize: 5\n    };\n    this.data = [{\n      type: 'input',\n      initialValue: '',\n      label: '用户名',\n      placeholder: '请输入用户名',\n      field: 'username',\n      width: '150px'\n    }];\n    this.state = {\n      rowSelection: {\n        selectedRowKeys: [],\n        selectedRows: []\n      },\n      type: 'radio',\n      list: [],\n      roleVisible: false,\n      perVisible: false,\n      authVisible: false,\n      checkedKeys: [],\n      targetKeys: []\n    };\n\n    this.handleSearch = data => {\n      console.log(data);\n    };\n\n    this.handleRole = () => {\n      this.setState({\n        roleVisible: true\n      });\n    };\n\n    this.creatRoleSubmit = () => {\n      let data = this.roleForm.props.form.getFieldsValue();\n      request({\n        url: 'role/create',\n        data: {\n          params: _objectSpread({}, data)\n        }\n      }).then(res => {\n        this.setState({\n          roleVisible: false\n        });\n      });\n      this.requestList();\n    };\n\n    this.handlePermission = () => {\n      if (this.state.rowSelection.selectedRows.length === 0) {\n        _Modal.info({\n          title: '信息',\n          content: '请选择一个角色'\n        });\n\n        return;\n      }\n\n      this.setState({\n        perVisible: true,\n        checkedKeys: this.state.rowSelection.selectedRows[0].menus\n      });\n    };\n\n    this.onCheck = checkedKeys => {\n      console.log(\"onCheck\", checkedKeys);\n      this.setState({\n        checkedKeys\n      });\n    };\n\n    this.setPerFn = () => {\n      let data = this.perForm.props.form.getFieldsValue();\n      data.user_id = this.state.rowSelection.selectedRows[0].id;\n      data.checkedKeys = this.state.checkedKeys;\n      request({\n        url: '/permission/edit',\n        data: {\n          params: _objectSpread({}, data)\n        }\n      }).then(res => {\n        if (res) {\n          this.setState({\n            perVisible: false\n          });\n          this.requestList();\n        }\n      });\n    };\n\n    this.handleUserAuth = () => {\n      if (this.state.rowSelection.selectedRows.length === 0) {\n        _Modal.info({\n          title: '信息',\n          content: '请选择一个角色'\n        });\n\n        return;\n      }\n\n      this.setState({\n        authVisible: true\n      });\n      this.getRoleUserList(this.state.rowSelection.selectedRows[0].id);\n    };\n\n    this.getAuthUserList = dataSource => {\n      const mockData = [];\n      const targetKeys = [];\n\n      if (dataSource && dataSource.length > 0) {\n        for (let i = 0; i < dataSource.length; i++) {\n          const data = {\n            key: dataSource[i].user_id,\n            title: dataSource[i].user_name,\n            status: dataSource[i].status\n          };\n\n          if (data.status === 1) {\n            targetKeys.push(data.key);\n          }\n\n          mockData.push(data);\n        }\n      }\n\n      this.setState({\n        mockData,\n        targetKeys\n      });\n    };\n\n    this.userAuth = () => {\n      let data = {};\n      data.user_ids = this.state.targetKeys || [];\n      data.role_id = this.state.rowSelection.selectedRows[0].id;\n      request({\n        url: '/role/user_role_edit',\n        data: {\n          params: _objectSpread({}, data)\n        }\n      }).then(res => {\n        if (res) {\n          this.setState({\n            authVisible: false\n          });\n          this.requestList();\n        }\n      });\n    };\n\n    this.handleChange = (nextTargetKeys, direction, moveKeys) => {\n      this.setState({\n        targetKeys: nextTargetKeys\n      });\n    };\n  }\n\n  componentDidMount() {\n    const options = {\n      url: '/role/allList',\n      type: 'get',\n      params: {}\n    };\n    getList(this, options);\n  }\n\n  requestList() {\n    request({\n      url: '/role/list',\n      type: 'get',\n      params: {\n        page: this.params.page,\n        pageSize: this.params.pageSize\n      }\n    }).then(res => {\n      console.log(res);\n    });\n  }\n\n  getRoleUserList(id) {\n    request({\n      url: '/role/user_list',\n      data: {\n        params: {\n          id: id\n        }\n      }\n    }).then(res => {\n      if (res) {\n        this.getAuthUserList(res.data.data);\n      }\n    });\n  }\n\n  render() {\n    const columns = [{\n      title: '角色ID',\n      dataIndex: 'id'\n    }, {\n      title: '角色名称',\n      dataIndex: 'role_name'\n    }, {\n      title: '创建时间',\n      dataIndex: 'create_time',\n\n      render(time) {\n        return formateDate(time);\n      }\n\n    }, {\n      title: '使用状态',\n      dataIndex: 'status',\n\n      render(status) {\n        if (status === 1) {\n          return \"启用\";\n        } else {\n          return \"停用\";\n        }\n      }\n\n    }, {\n      title: '授权时间',\n      dataIndex: 'authorize_time',\n\n      render(time) {\n        return formateDate(time);\n      }\n\n    }, {\n      title: '授权人',\n      dataIndex: 'authorize_user_name'\n    }];\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(_Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(BaseForm, {\n      data: this.data,\n      handleSearch: this.handleSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    })), React.createElement(_Card, {\n      style: {\n        margin: '10px 0'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.handleRole,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, \"\\u521B\\u5EFA\\u89D2\\u8272\"), React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.handlePermission,\n      style: {\n        margin: '0 20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, \"\\u8BBE\\u7F6E\\u6743\\u9650\"), React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.handleUserAuth,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, \"\\u7528\\u6237\\u6388\\u6743\")), React.createElement(_Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(Etable, {\n      that: this,\n      dataSource: this.state.dataSource,\n      columns: columns,\n      rowSelection: this.state.rowSelection,\n      updateSelectedItem: updateSelectedItem.bind(this),\n      pagination: this.state.pagination,\n      type: this.state.type,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    })), React.createElement(_Modal, {\n      title: \"\\u521B\\u5EFA\\u89D2\\u8272\",\n      visible: this.state.roleVisible,\n      onOk: this.creatRoleSubmit,\n      onCancel: () => {\n        this.setState({\n          roleVisible: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, React.createElement(CreatRole, {\n      wrappedComponentRef: inst => this.roleForm = inst,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    })), React.createElement(_Modal, {\n      title: \"\\u8BBE\\u7F6E\\u6743\\u9650\",\n      visible: this.state.perVisible,\n      onOk: this.setPerFn,\n      onCancel: () => {\n        this.setState({\n          perVisible: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(SetPer, {\n      detailInfo: this.state.rowSelection.selectedRows[0],\n      wrappedComponentRef: inst => this.perForm = inst,\n      checkedKeys: this.state.checkedKeys,\n      onCheck: this.onCheck,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    })), React.createElement(_Modal, {\n      width: 800,\n      title: \"\\u7528\\u6237\\u6388\\u6743\",\n      visible: this.state.authVisible,\n      onOk: this.userAuth,\n      onCancel: () => {\n        this.setState({\n          authVisible: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, React.createElement(UserAuth, {\n      dataSource: this.state.mockData,\n      targetKeys: this.state.targetKeys //右侧选中数据\n      ,\n      onChange: this.handleChange //左右穿梭时的回调\n      ,\n      detailInfo: this.state.rowSelection.selectedRows[0],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    })));\n  }\n\n} //创建角色\n\nclass CreatRole extends React.Component {\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const formItemLayout = {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 16\n      }\n    };\n    return React.createElement(_Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, React.createElement(FormItem, Object.assign({\n      label: \"\\u89D2\\u8272\\u540D\\u79F0\"\n    }, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }), getFieldDecorator('role_name', {\n      initialValue: ''\n    })(React.createElement(_Input, {\n      type: \"text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u89D2\\u8272\\u540D\\u79F0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }))), React.createElement(FormItem, Object.assign({\n      label: \"\\u72B6\\u6001\"\n    }, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }), getFieldDecorator('status', {\n      initialValue: 1\n    })(React.createElement(_Select, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }, React.createElement(Option, {\n      value: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, \"\\u5F00\\u542F\"), React.createElement(Option, {\n      value: 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, \"\\u5173\\u95ED\")))));\n  }\n\n}\n\nCreatRole = _Form.create()(CreatRole);\n\nclass SetPer extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.renderTreeNodes = data => data.map(item => {\n      if (item.children) {\n        return React.createElement(TreeNode, {\n          title: item.title,\n          key: item.key,\n          dataRef: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 366\n          },\n          __self: this\n        }, this.renderTreeNodes(item.children));\n      }\n\n      return React.createElement(TreeNode, Object.assign({}, item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }));\n    });\n  }\n\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const formItemLayout = {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 18\n      }\n    };\n    const detail_info = this.props.detailInfo;\n    return React.createElement(_Form, {\n      layout: \"horizontal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, React.createElement(FormItem, Object.assign({}, formItemLayout, {\n      label: \"\\u89D2\\u8272\\u540D\\u79F0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }), React.createElement(_Input, {\n      disabled: true,\n      maxLength: 8,\n      placeholder: detail_info.role_name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    })), React.createElement(FormItem, Object.assign({\n      label: \"\\u72B6\\u6001\"\n    }, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386\n      },\n      __self: this\n    }), getFieldDecorator(\"status\", {\n      initialValue: '1'\n    })(React.createElement(_Select, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }, React.createElement(Option, {\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }, \"\\u542F\\u7528\"), React.createElement(Option, {\n      value: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }, \"\\u505C\\u7528\")))), React.createElement(FormItem, Object.assign({\n      label: \"\\u6743\\u9650\"\n    }, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398\n      },\n      __self: this\n    }), React.createElement(_Tree, {\n      checkable: true //可勾选\n      ,\n      defaultExpandAll: true //展开所有\n      ,\n      onCheck: this.props.onCheck //勾选的回调\n      ,\n      checkedKeys: this.props.checkedKeys //选中的值\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }, this.renderTreeNodes(menuConfig))));\n  }\n\n}\n\nSetPer = _Form.create()(SetPer); // 用户授权\n\nclass UserAuth extends React.Component {\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const formItemLayout = {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 19\n      }\n    };\n    const detail_info = this.props.detailInfo;\n    return React.createElement(_Form, {\n      layout: \"horizontal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429\n      },\n      __self: this\n    }, React.createElement(FormItem, Object.assign({\n      label: \"\\u89D2\\u8272\\u540D\\u79F0\"\n    }, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430\n      },\n      __self: this\n    }), getFieldDecorator('role_name')(React.createElement(_Input, {\n      disabled: true,\n      maxLength: 8,\n      placeholder: detail_info.role_name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432\n      },\n      __self: this\n    }))), React.createElement(FormItem, Object.assign({\n      label: \"\\u9009\\u62E9\\u7528\\u6237:\"\n    }, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435\n      },\n      __self: this\n    }), React.createElement(_Transfer, {\n      dataSource: this.props.dataSource //左侧所有的数据\n      ,\n      titles: [\"待选用户\", \"已选用户\"],\n      targetKeys: this.props.targetKeys //右侧选中数据\n      ,\n      onChange: this.props.onChange //左右穿梭时的回调\n      ,\n      render: item => item.title //显示的label名字\n      ,\n      showSearch: true //时候显示搜索框\n      ,\n      listStyle: {\n        width: 250,\n        height: 500\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436\n      },\n      __self: this\n    })));\n  }\n\n}\n\nUserAuth = _Form.create()(UserAuth);","map":{"version":3,"sources":["D:\\react-admin-master\\src\\pages\\User\\Permission\\MenuManage\\index.js"],"names":["React","BaseForm","Etable","formateDate","updateSelectedItem","getList","request","menuConfig","Option","FormItem","Item","TreeNode","Permission","Component","params","page","pageSize","data","type","initialValue","label","placeholder","field","width","state","rowSelection","selectedRowKeys","selectedRows","list","roleVisible","perVisible","authVisible","checkedKeys","targetKeys","handleSearch","console","log","handleRole","setState","creatRoleSubmit","roleForm","props","form","getFieldsValue","url","then","res","requestList","handlePermission","length","info","title","content","menus","onCheck","setPerFn","perForm","user_id","id","handleUserAuth","getRoleUserList","getAuthUserList","dataSource","mockData","i","key","user_name","status","push","userAuth","user_ids","role_id","handleChange","nextTargetKeys","direction","moveKeys","componentDidMount","options","render","columns","dataIndex","time","margin","bind","pagination","inst","CreatRole","getFieldDecorator","formItemLayout","labelCol","span","wrapperCol","create","SetPer","renderTreeNodes","map","item","children","detail_info","detailInfo","role_name","UserAuth","onChange","height"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {Card, Transfer, Button, Modal, Form,Input,Select,Tree } from \"antd\";\nimport BaseForm from '../../../../common/BaseForm'\nimport Etable from \"../../../../common/Etable\";\nimport { formateDate, updateSelectedItem, getList } from '../../../../utils'\nimport request from '../../../../utils/request'\nimport menuConfig from '../../../../config/menuConfig'\nconst Option = Select.Option\nconst FormItem = Form.Item\nconst { TreeNode } = Tree\n\n\nexport default class Permission extends React.Component{\n\n    params = {\n        page:1,\n        pageSize:5\n    }\n    data = [\n        {\n            type:'input',\n            initialValue:'',\n            label:'用户名',\n            placeholder:'请输入用户名',\n            field:'username',\n            width:'150px'\n        }\n    ]\n\n    state= {\n        rowSelection:{\n            selectedRowKeys:[],\n            selectedRows:[],\n        },\n        type:'radio',\n        list:[],\n        roleVisible:false,\n        perVisible:false,\n        authVisible:false,\n        checkedKeys:[],\n        targetKeys:[]\n    }\n\n    handleSearch = (data)=>{\n        console.log(data)\n    }\n\n    componentDidMount(){\n        const options = {\n            url:'/role/allList',\n            type:'get',\n            params:{}\n        }\n        getList(this,options)\n    }\n\n    requestList(){\n        request({\n            url:'/role/list',\n            type:'get',\n            params:{\n                page:this.params.page,\n                pageSize:this.params.pageSize\n            }\n        }).then(res =>{\n            console.log(res)\n        })\n    }\n\n    handleRole=()=>{\n        this.setState({\n            roleVisible:true\n        })\n    }\n    creatRoleSubmit= ()=>{\n        let data = this.roleForm.props.form.getFieldsValue()\n        request({\n            url:'role/create',\n            data:{\n                params:{\n                    ...data\n                }\n            }\n        }).then(res =>{\n            this.setState({\n                roleVisible:false\n            })\n        })\n        this.requestList();\n    }\n\n    handlePermission= ()=>{\n        if(this.state.rowSelection.selectedRows.length===0){\n            Modal.info({\n                title:'信息',\n                content:'请选择一个角色'\n            })\n            return;\n        }\n        this.setState({\n            perVisible:true,\n            checkedKeys:this.state.rowSelection.selectedRows[0].menus\n        })\n    }\n    onCheck = checkedKeys => {\n        console.log(\"onCheck\", checkedKeys);\n        this.setState({ checkedKeys });\n    }\n\n    setPerFn=()=>{\n        \n        let data = this.perForm.props.form.getFieldsValue()\n        data.user_id = this.state.rowSelection.selectedRows[0].id\n        data.checkedKeys = this.state.checkedKeys\n        \n        request({\n            url:'/permission/edit',\n            data:{\n                params:{\n                    ...data\n                }\n            }\n        }).then((res)=>{\n            if(res){\n                this.setState({\n                    perVisible:false\n                })\n                this.requestList();\n            }\n        })\n    }\n\n    handleUserAuth = () =>{\n        if(this.state.rowSelection.selectedRows.length===0){\n            Modal.info({\n                title:'信息',\n                content:'请选择一个角色'\n            })\n            return;\n        }\n        this.setState({\n            authVisible:true\n        })\n        this.getRoleUserList(this.state.rowSelection.selectedRows[0].id)\n    }\n    getRoleUserList(id){\n        request({\n            url:'/role/user_list',\n            data:{\n                params:{\n                    id:id\n                }\n            }\n        }).then((res)=>{\n            if(res){\n                this.getAuthUserList(res.data.data);\n            }\n        })\n    }\n\n    getAuthUserList = (dataSource)=>{\n        const mockData = [];\n        const targetKeys = [];\n        if (dataSource && dataSource.length > 0) {\n            for (let i = 0; i < dataSource.length; i++) {\n                const data = {\n                    key: dataSource[i].user_id,\n                    title: dataSource[i].user_name,\n                    status: dataSource[i].status,\n                };\n                if (data.status === 1) {\n                    targetKeys.push(data.key);\n                }\n                mockData.push(data);\n            }\n        }\n        this.setState({mockData, targetKeys});\n    }\n\n    userAuth = ()=>{\n        let data = {};\n        data.user_ids = this.state.targetKeys || [];\n        data.role_id = this.state.rowSelection.selectedRows[0].id;\n        request({\n            url:'/role/user_role_edit',\n            data:{\n                params:{\n                    ...data\n                }\n            }\n        }).then((res)=>{\n            if(res){\n                this.setState({\n                    authVisible:false\n                })\n                this.requestList();\n            }\n        })\n    \n    }\n\n    \n\n    //左右穿梭时的回调\n    handleChange = (nextTargetKeys, direction, moveKeys) => {\n        this.setState({ targetKeys: nextTargetKeys });\n    };\n\n\n    render(){\n        const columns = [\n            {\n                title: '角色ID',\n                dataIndex: 'id'\n            }, {\n                title: '角色名称',\n                dataIndex: 'role_name'\n            },{\n                title: '创建时间',\n                dataIndex: 'create_time',\n                render(time){\n                    return formateDate(time)\n                }\n            }, {\n                title: '使用状态',\n                dataIndex: 'status',\n                render(status){\n                    if (status === 1) {\n                        return \"启用\"\n                    } else {\n                        return \"停用\"\n                    }\n                }\n            }, {\n                title: '授权时间',\n                dataIndex: 'authorize_time',\n                render(time){\n                    return formateDate(time)\n                }\n            }, {\n                title: '授权人',\n                dataIndex: 'authorize_user_name',\n            }\n        ];\n\n        return (\n            <div>\n                <Card>\n                    <BaseForm\n                        data={this.data}\n                        handleSearch = {this.handleSearch}\n                    />\n                </Card>\n                <Card style={{margin:'10px 0'}}>\n                    <Button type=\"primary\" onClick={this.handleRole}>创建角色</Button>\n                    <Button type=\"primary\" onClick={this.handlePermission} style={{margin:'0 20px'}}>设置权限</Button>\n                    <Button type=\"primary\" onClick={this.handleUserAuth}>用户授权</Button>\n                </Card>\n                <Card>\n                    <Etable\n                        that={this}\n                        dataSource={this.state.dataSource}\n                        columns={columns}\n                        rowSelection={this.state.rowSelection}\n                        updateSelectedItem={updateSelectedItem.bind(this)}\n                        pagination={this.state.pagination}\n                        type={this.state.type}\n                    >    \n                    </Etable>\n                </Card>\n                <Modal\n                    title=\"创建角色\"\n                    visible={this.state.roleVisible}\n                    onOk={this.creatRoleSubmit}\n                    onCancel={()=>{this.setState({\n                        roleVisible:false\n                    })}}\n                >\n                    <CreatRole wrappedComponentRef={(inst) => this.roleForm = inst} />\n                </Modal>\n                <Modal\n                    title=\"设置权限\"\n                    visible={this.state.perVisible}\n                    onOk={this.setPerFn}\n                    onCancel={()=>{\n                        this.setState({\n                            perVisible:false\n                        })\n                    }}\n                >\n                    <SetPer \n                        detailInfo={this.state.rowSelection.selectedRows[0]} \n                        wrappedComponentRef={(inst) => this.perForm = inst}\n                        checkedKeys={this.state.checkedKeys}\n                        onCheck={this.onCheck}\n                    />\n                </Modal>\n                <Modal\n                    width={800}\n                    title=\"用户授权\"\n                    visible={this.state.authVisible}\n                    onOk={this.userAuth}\n                    onCancel={()=>{\n                        this.setState({\n                            authVisible:false\n                        })\n                    }}\n                >\n                    <UserAuth\n                        dataSource={this.state.mockData}\n                        targetKeys={this.state.targetKeys} //右侧选中数据\n                        onChange={this.handleChange} //左右穿梭时的回调\n                        detailInfo = {this.state.rowSelection.selectedRows[0]}\n                    />\n                </Modal>\n            </div>\n        )\n    }\n}\n\n//创建角色\nclass CreatRole extends React.Component{\n\n    render(){\n        const { getFieldDecorator } = this.props.form;\n        const formItemLayout = {\n            labelCol: {span: 5},\n            wrapperCol: {span: 16}\n        }\n        return (\n            <Form>\n                <FormItem label=\"角色名称\" {...formItemLayout}>\n                    {\n                        getFieldDecorator('role_name',{\n                            initialValue:''\n                        })(\n                            <Input  type=\"text\" placeholder=\"请输入角色名称\" />\n                        )\n                    }\n                </FormItem>\n                <FormItem label=\"状态\" {...formItemLayout}>\n                    {\n                        getFieldDecorator('status',{\n                            initialValue:1\n                        })(\n                            <Select>\n                                <Option value={1}>开启</Option>\n                                <Option value={0}>关闭</Option>\n                            </Select>\n                        )\n                    }\n                </FormItem>\n            </Form>\n        )\n    }\n}\nCreatRole = Form.create()(CreatRole)\n\n\nclass SetPer extends React.Component{\n\n    renderTreeNodes = data =>\n        data.map(item => {\n            if (item.children) {\n                return (\n                    <TreeNode title={item.title} key={item.key} dataRef={item}>\n                        {this.renderTreeNodes(item.children)}\n                    </TreeNode>\n                );\n            }\n            return <TreeNode {...item} />;\n        });\n\n    render(){\n        const { getFieldDecorator } = this.props.form\n        const formItemLayout = {\n            labelCol: {span: 5},\n            wrapperCol: {span: 18}\n        }\n        const detail_info = this.props.detailInfo;\n        return (\n            <Form layout=\"horizontal\">\n                <FormItem {...formItemLayout} label=\"角色名称\">\n                    <Input disabled maxLength={8}  placeholder={detail_info.role_name} />\n                </FormItem>\n                <FormItem label=\"状态\"  {...formItemLayout}>\n                    {\n                        getFieldDecorator(\"status\",{\n                            initialValue:'1'\n                        })(\n                            <Select>\n                                <Option value=\"1\">启用</Option>\n                                <Option value=\"0\">停用</Option>\n                            </Select>\n                        )\n                    }\n                </FormItem>\n                <FormItem label=\"权限\"  {...formItemLayout}>\n                    <Tree\n                        checkable//可勾选\n                        defaultExpandAll//展开所有\n                        onCheck={this.props.onCheck}//勾选的回调\n                        checkedKeys={this.props.checkedKeys}//选中的值\n                    >\n                        {this.renderTreeNodes(menuConfig)}\n                    </Tree>\n                </FormItem>\n            </Form>\n        )\n    }\n}\nSetPer = Form.create()(SetPer)\n\n\n\n\n// 用户授权\nclass UserAuth extends React.Component {\n    \n\n    render() {\n        const { getFieldDecorator } = this.props.form;\n        const formItemLayout = {\n            labelCol: {span: 5},\n            wrapperCol: {span: 19}\n        }\n        const detail_info = this.props.detailInfo\n        return (\n            <Form layout=\"horizontal\">\n                <FormItem label=\"角色名称\" {...formItemLayout}>\n                    {getFieldDecorator('role_name')(\n                        <Input disabled maxLength={8} placeholder={detail_info.role_name} />\n                    )}\n                </FormItem>\n                <FormItem label=\"选择用户:\" {...formItemLayout}>\n                    <Transfer\n                        dataSource={this.props.dataSource} //左侧所有的数据\n                        titles={[\"待选用户\", \"已选用户\"]}\n                        targetKeys={this.props.targetKeys} //右侧选中数据\n                        onChange={this.props.onChange} //左右穿梭时的回调\n                        render={item => item.title} //显示的label名字\n                        showSearch //时候显示搜索框\n                        listStyle={{\n                            width: 250,\n                            height: 500\n                        }}\n                    />\n                </FormItem>\n            </Form>\n        )\n    }\n}\nUserAuth = Form.create()(UserAuth)\n"]},"metadata":{},"sourceType":"module"}