{"ast":null,"code":"import \"antd/lib/breadcrumb/style/css\";\nimport _Breadcrumb from \"antd/lib/breadcrumb\";\nimport \"antd/lib/icon/style/css\";\nimport _Icon from \"antd/lib/icon\";\nimport \"antd/lib/menu/style/css\";\nimport _Menu from \"antd/lib/menu\";\nimport \"antd/lib/layout/style/css\";\nimport _Layout from \"antd/lib/layout\";\n\nvar _class,\n    _temp,\n    _jsxFileName = \"D:\\\\react-admin-master\\\\src\\\\pages\\\\User\\\\index.js\";\n\nimport React from \"react\";\nimport { Route, Redirect, Switch } from \"react-router-dom\";\nimport './index.less';\nimport NotFound from '../NotFound';\nimport connect from '../../utils/connect';\nimport { getMenuItem, getBreadItem, filterRoutes } from '../../utils';\nimport { recursionRouterTwo } from '../../utils/recursion-router';\nconst Header = _Layout.Header,\n      Content = _Layout.Content,\n      Footer = _Layout.Footer,\n      Sider = _Layout.Sider;\n\nlet User = connect(_class = (_temp = class User extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      collapsed: false,\n      list: [123]\n    };\n\n    this.onCollapse = collapsed => {\n      this.setState({\n        collapsed\n      });\n    };\n\n    this.getBreadList = path => {\n      const pathList = path.slice(1).split(\"/\");\n      return pathList.map((item, index) => {\n        return {\n          name: item,\n          path: index > 0 ? \"/\".concat(pathList[index - 1], \"/\").concat(item) : \"/\".concat(item)\n        };\n      });\n    };\n\n    this.logOut = () => {\n      const _this$props = this.props,\n            dispatch = _this$props.dispatch,\n            authChangeAction = _this$props.authChangeAction;\n      localStorage.removeItem('authed');\n      dispatch(authChangeAction(null));\n    };\n  }\n\n  componentDidMount() {\n    const path = this.props.location.pathname;\n    const _this$props2 = this.props,\n          dispatch = _this$props2.dispatch,\n          permissionAction = _this$props2.permissionAction;\n    let authed = this.props.state.authed || localStorage.getItem('authed'); // 如果登陆之后可以利用redux修改该值\n\n    if (authed && this.props.state.permissionList.length === 1) {\n      dispatch(permissionAction(path));\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {}\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return true;\n  }\n\n  render() {\n    //默认进入子组件index\n    if (this.props.location.pathname === '/user') {\n      return React.createElement(Redirect, {\n        path: \"/user\",\n        exact: true,\n        to: {\n          pathname: '/user/index'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      });\n    }\n\n    const _this$props$state = this.props.state,\n          permissionList = _this$props$state.permissionList,\n          name = _this$props$state.name;\n    const path = this.props.location.pathname;\n    const defaultOpenKeys = filterRoutes(path);\n    const breadList = recursionRouterTwo(defaultOpenKeys, permissionList);\n    return React.createElement(_Layout, {\n      style: {\n        minHeight: '100vh'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(Sider, {\n      collapsible: true,\n      collapsed: this.state.collapsed,\n      onCollapse: this.onCollapse,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(_Menu, {\n      onClick: this.menuClick,\n      theme: \"dark\",\n      defaultOpenKeys: defaultOpenKeys,\n      selectedKeys: [path],\n      mode: \"inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, getMenuItem(permissionList))), React.createElement(_Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(Header, {\n      style: {\n        background: '#fff',\n        padding: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"logoutIcon\",\n      onClick: this.logOut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"poweroff\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      className: \"loginUser\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, name)), React.createElement(Content, {\n      style: {\n        margin: '0 16px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(_Breadcrumb, {\n      style: {\n        margin: '16px 0'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, getBreadItem(breadList)), React.createElement(\"div\", {\n      style: {\n        padding: 24,\n        background: '#fff',\n        minHeight: 360\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, permissionList.map((value, key) => {\n      return React.createElement(Route, {\n        routes: value,\n        key: key,\n        exact: value.exact ? true : false,\n        path: value.path,\n        component: value.component,\n        list: this.state.list,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      });\n    }), React.createElement(Route, {\n      component: NotFound,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    })))), React.createElement(Footer, {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Ant Design 2021\")));\n  }\n\n}, _temp)) || _class;\n\nexport default User;","map":{"version":3,"sources":["D:\\react-admin-master\\src\\pages\\User\\index.js"],"names":["React","Route","Redirect","Switch","NotFound","connect","getMenuItem","getBreadItem","filterRoutes","recursionRouterTwo","Header","Content","Footer","Sider","User","Component","state","collapsed","list","onCollapse","setState","getBreadList","path","pathList","slice","split","map","item","index","name","logOut","props","dispatch","authChangeAction","localStorage","removeItem","componentDidMount","location","pathname","permissionAction","authed","getItem","permissionList","length","componentDidUpdate","prevProps","prevState","shouldComponentUpdate","nextProps","nextState","render","defaultOpenKeys","breadList","minHeight","menuClick","background","padding","margin","value","key","exact","component","textAlign"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Route, Redirect, Switch } from \"react-router-dom\";\nimport './index.less'\nimport NotFound from '../NotFound'\nimport connect from '../../utils/connect'\nimport { getMenuItem, getBreadItem, filterRoutes } from '../../utils'\nimport { Layout, Menu, Breadcrumb,Icon } from 'antd'\nimport { recursionRouterTwo } from '../../utils/recursion-router'\nconst { Header, Content, Footer, Sider } = Layout\n\n@connect\n\nclass User extends React.Component {\n    state = {\n        collapsed: false,\n        list:[123]\n    };\n\n    onCollapse = collapsed => {\n        this.setState({ collapsed });\n    };\n\n    getBreadList = (path)=>{\n        const pathList = path.slice(1).split(\"/\")\n        return pathList.map((item,index) => {\n            return {\n                name:item,\n                path:index>0?`/${pathList[index-1]}/${item}`:`/${item}`\n            }\n        })\n    }\n    logOut = ()=> {\n        const {dispatch,authChangeAction} = this.props\n        localStorage.removeItem('authed')\n        dispatch(authChangeAction(null))\n    }\n   \n    componentDidMount(){\n        const path = this.props.location.pathname\n        const {dispatch,permissionAction} = this.props\n        let authed = this.props.state.authed || localStorage.getItem('authed') // 如果登陆之后可以利用redux修改该值\n        if(authed && this.props.state.permissionList.length === 1){\n            dispatch(permissionAction(path))\n        }\n        \n\n    }\n    componentDidUpdate(prevProps, prevState){\n        \n    }\n    shouldComponentUpdate(nextProps, nextState) {\n        return true\n    }\n    render() {\n        //默认进入子组件index\n        if(this.props.location.pathname === '/user'){\n            return (\n                <Redirect path=\"/user\"  exact={true} to={{pathname: '/user/index'}} />\n            )\n        }\n        \n        const { permissionList, name } = this.props.state\n        const path = this.props.location.pathname\n        const defaultOpenKeys = filterRoutes(path)\n        \n        const breadList = recursionRouterTwo(defaultOpenKeys,permissionList)\n        return (\n            <Layout style={{ minHeight: '100vh' }}>\n                <Sider collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse}>\n                    <div className=\"logo\" />\n                    \n                    <Menu onClick={this.menuClick} theme=\"dark\" defaultOpenKeys={defaultOpenKeys} selectedKeys={[path]} mode=\"inline\">\n                        {\n                            getMenuItem(permissionList)\n                        }\n                    </Menu>\n                </Sider>\n                <Layout>\n                    <Header style={{ background: '#fff', padding: 0 }}>\n                        {/* <img src={avatar} alt=\"\"/> */}\n                        <span className=\"logoutIcon\" onClick={this.logOut}>\n                            <Icon type=\"poweroff\" />\n                        </span>\n                        <span className=\"loginUser\">{name}</span>\n                    </Header>\n                    <Content style={{ margin: '0 16px' }}>\n                        <Breadcrumb style={{ margin: '16px 0' }}>\n                            {\n                                getBreadItem(breadList)\n                            }\n                        </Breadcrumb>\n                        <div style={{ padding: 24, background: '#fff', minHeight: 360 }}>\n                        <Switch>\n                            {permissionList.map((value, key) => {\n                                return (\n                                    <Route\n                                        routes={value}\n                                        key={key}\n                                        exact={value.exact ? true : false}\n                                        path={value.path}\n                                        component={value.component}\n                                        list={this.state.list}\n                                    />\n                                );\n                            })}\n                            <Route component={NotFound}/> \n                        </Switch>\n                        </div>\n                    </Content>\n                    <Footer style={{ textAlign: 'center' }}>Ant Design 2021</Footer>\n                </Layout>\n            </Layout>\n        )\n    }\n}\n\nexport default User\n"]},"metadata":{},"sourceType":"module"}